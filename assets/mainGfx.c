#include <c64/vic.h>
#include <engine/easyFlashBanks.h>
#include <c64/memmap.h>
#include <assets/assetsSettings.h>
#include "mainGfx.h"

#pragma data ( mainGfxSprites )

__export const struct SPRITES SpriteResources = {{
    #embed 0xffff 3 "assets/sprites/joyCursor.spd"
},{
    #embed 0xffff 3 "assets/sprites/emptyBattery.spd"
    #embed 0xffff 3 "assets/sprites/emptyBattery.spd"
    #embed 0xffff 3 "assets/sprites/emptyBattery.spd"
    #embed 0xffff 3 "assets/sprites/emptyBattery.spd"
},{
    0
},{
    0
},{
    #embed 0xffff 3 "assets/sprites/timeIcons.spd"
},{
    #embed 0x40 20 "assets/sprites/currency.spd"
},{
    0
},{
    #embed 0x0280 16 "assets/sprites/weather.spd"
}};

// ===========================================================================================
// Aux gfx - to be copied into sprites
// ===========================================================================================
#pragma data ( mainGfxAux )

__export const struct AUX_GFX AuxResources = {{
    #embed 0xffff 16 "assets/sprites/taskIcons.spd"
},{
    #embed 0xffff 20 "assets/sprites/faces.spd"
}};
// sprite font - 7 lines high only
__export char CALENDAR_FONTS[59*7] = {
    0,0,0,0,0,0,0,
    0x18,0x3C,0x66,0x7E,0x66,0x26,0x00,
    0x7C,0x66,0x7C,0x66,0x66,0x3C,0x00,
    0x3C,0x66,0x60,0x60,0x26,0x3C,0x00,
    0x78,0x6C,0x66,0x66,0x6C,0x38,0x00,
    0x7E,0x60,0x78,0x60,0x60,0x3E,0x00,
    0x7E,0x60,0x78,0x60,0x60,0x20,0x00,
    0x3C,0x66,0x60,0x6E,0x26,0x3C,0x00,
    0x66,0x66,0x7E,0x66,0x66,0x22,0x00,
    0x18,0x18,0x18,0x18,0x18,0x08,0x00,
    0x08,0x0C,0x0C,0x6C,0x6C,0x38,0x00,
    0x66,0x6C,0x78,0x78,0x6C,0x26,0x00,
    0x40,0x60,0x60,0x60,0x60,0x3E,0x00,
    0x62,0x77,0x7F,0x6B,0x63,0x21,0x00,
    0x66,0x76,0x7E,0x7E,0x6E,0x26,0x00,
    0x3C,0x66,0x66,0x66,0x26,0x3C,0x00,
    0x7C,0x66,0x7C,0x60,0x60,0x20,0x00,
    0x3C,0x66,0x66,0x66,0x26,0x3C,0x0E,
    0x7C,0x66,0x7C,0x78,0x6C,0x26,0x00,
    0x3E,0x62,0x3C,0x06,0x66,0x3C,0x00,
    0x7E,0x18,0x18,0x18,0x18,0x08,0x00,
    0x64,0x66,0x66,0x66,0x26,0x3C,0x00,
    0x46,0x66,0x66,0x66,0x3C,0x18,0x00,
    0x62,0x63,0x6B,0x7F,0x77,0x23,0x00,
    0x66,0x3C,0x18,0x3C,0x66,0x26,0x00,
    0x66,0x66,0x3C,0x18,0x18,0x08,0x00,
    0x7E,0x06,0x0C,0x18,0x32,0x7E,0x00,
    0,0,0,0,0,0,0,
    0x04,0x04,0x76,0x1C,0x24,0x74,0x00,
    0,0,0,0,0,0,0,
    0,0,0,0,0,0,0,
    0,0,0,0,0,0,0,
    0,0,0,0,0,0,0,
    0,0,0,0,0,0,0,
    0,0,0,0,0,0,0,
    0,0,0,0,0,0,0,
    0,0,0,0,0,0,0,
    0,0,0,0,0,0,0,
    0x78,0xCC,0xDC,0xEC,0xCC,0x79,0x00,
    0x10,0x30,0x70,0x30,0x30,0x79,0x00,
    0x78,0xCC,0x0C,0x38,0x60,0xFD,0x00,
    0x78,0xCC,0x18,0x0C,0xCC,0x79,0x00,
    0x1C,0x3C,0x6C,0xCC,0xFE,0x0D,0x00,
    0x7C,0xC0,0xF8,0x0C,0xCC,0x79,0x00,
    0x78,0xC0,0xF8,0xCC,0xCC,0x79,0x00,
    0xFC,0xCC,0x18,0x30,0x30,0x31,0x00,
    0x78,0xCC,0x78,0xCC,0xCC,0x79,0x00,
    0x78,0xCC,0x7C,0x0C,0xCC,0x79,0x00,
    0x3C,0x66,0x6E,0x76,0x66,0x3C,0x00,
    0x08,0x18,0x38,0x18,0x18,0x3C,0x00,
    0x3C,0x66,0x06,0x1C,0x30,0x7E,0x00,
    0x3C,0x66,0x0C,0x06,0x66,0x3C,0x00,
    0x0E,0x1E,0x36,0x66,0x7F,0x06,0x00,
    0x3E,0x60,0x7C,0x06,0x66,0x3C,0x00,
    0x3C,0x60,0x7C,0x66,0x66,0x3C,0x00,
    0x7E,0x66,0x0C,0x18,0x18,0x18,0x00,
    0x3C,0x66,0x3C,0x66,0x66,0x3C,0x00,
    0x3C,0x66,0x3E,0x06,0x66,0x3C,0x00,
    0x00,0x18,0x10,0x00,0x18,0x10,0x00
};

__export const char PROPORTIONAL_FONT_WIDTH[109] = {
//  @, a, b, c, d, e, f, g, h, i, j, k, l, m, n, o
    7, 7, 7, 7 ,7, 6, 6, 7, 7, 3, 5, 6, 4, 8, 7, 7,
//  p, q, r, s, t, u, v, w, x, y, z, [, z, ], ?, ?
    7, 7, 7, 7, 6, 7, 7, 8, 7, 7, 7, 5, 7, 5, 7 ,8,
//   , !, ", #, $, %, &, ', (, ), *, +, ,, -, ., /
    7, 3, 7 ,8, 7, 7, 8, 5, 5, 5, 8, 7, 4, 7, 3, 8,
//  0, 1, 2, 3, 4, 5, 6, 7, 8, 9, :, ;, <, =, >, ?
    7, 5, 7, 7, 8, 7, 7, 7, 7, 7, 3, 4, 7, 7, 7, 7,
//  ~, A, B, C, D, E, F, G, H, I, J, K, L, M, N, O
    8, 7, 7, 7, 7, 7, 7, 7, 7, 3, 6, 7, 7, 8, 7, 7,
//  P, Q, R, S, T, U, V, W, X, Y, Z, ą, ć, ę, ł, ń
    7, 7, 7, 7, 7, 7, 7, 8, 7, 7, 7, 8, 6, 6, 5 ,7,
//  ó, ś, ź, ż, Ą, Ć, Ę, Ł, Ń, Ó, Ś, Ż, Ź
    7, 7, 7, 7, 7, 7, 7, 7, 7, 7, 7, 7, 7
};

// ===========================================================================================
// Fonts
// ===========================================================================================
#pragma data(mainGfxFont)
__export const char GAME_FONT[0x800] = {
    // #embed 0xffff 2 "assets/fonts.64c"
    #embed 0xffff 2 "assets/game_font2.64c"
};

// ===========================================================================================
// Data Loader
// ===========================================================================================
#pragma code ( mainGfxCode )
#pragma data ( mainGfxData )

// Loading fonts and sprites
void loadMainGfx(){
    // ROM on, I/O off - as we will copy to RAM under I/O ports
    mmap_set(0b00110011);

    // sprites
    char i = 0;
    do {
#assign y 0
#repeat
        GFX_1_SPR[y + i] = GFX_1_SPR_SRC[y + i];
#assign y y + 0x100
#until y == 0x100*0x10
        i++;
    } while (i != 0);

    // fonts & aux (but only half of the cart region atm - copy as needed later)
    i = 0;
    do {
#assign y 0
#repeat
        GFX_1_FNT[y + i] = GFX_1_FNT_SRC[y + i];
        GFX_1_AUX[y + i] = GFX_1_AUX_SRC[y + i];
        GFX_1_AUX[y + 0x800 + i] = GFX_1_AUX_SRC[y + 0x800 + i];
#assign y y + 0x100
#until y == 0x100*8
        i++;
    } while (i != 0);

    // turn ROMS and I/O back on, so that we don't get a problem when bank tries to be switched but I/O is not visible
    mmap_set(MMAP_ROM);
}
// Switching code generation back to shared section
#pragma code ( code )
#pragma data ( data )

// used often, kept in RAM
__export const char SPR_CURRENCY_COLORS[1] = {0x9};
__export const char SPR_TIME_ICONS_COLORS[8] = {0x1, 0xb, 0xc, 0xf, 0x3, 0xf, 0xc, 0xb};
__export const char SPR_WEATHER_COLORS[10] = {0x7, 0x7, 0x7, 0xe, 0x7, 0x1, 0xb, 0xb, 0xb, 0xb};
// 0 is end of colors, use 0x10 for black
__export const char SPR_JOY_CURSOR_COLORS[16] = {0x10, 0x10, 0xb, 0xb, 0xf, 0xf, 0x3, 0x3, 0x1, 0x3, 0x3, 0xf, 0xf, 0xb, 0xb, 0x0};
__export const char SPR_JOY_CURSOR_COLORS_ERROR[16] = {0x10, 0x10, 0x9, 0x9, 0x2, 0x2, 0x8, 0x8, 0xa, 0x8, 0x8, 0x2, 0x2, 0x9, 0x9, 0x0};
